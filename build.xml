<?xml version="1.0" encoding="UTF-8"?>
<!--
 Copyright (C) 2011 CRS4.
 
 This file is part of Seal.
 
 Seal is free software: you can redistribute it and/or modify it
 under the terms of the GNU General Public License as published by the Free
 Software Foundation, either version 3 of the License, or (at your option)
 any later version.
 
 Seal is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 for more details.
 
 You should have received a copy of the GNU General Public License along
 with Seal.  If not, see <http://www.gnu.org/licenses/>.
-->

<project name="PairReadsQSeq" default="package" basedir=".">
  <!-- user directories -->
  <property name="src.dir" value="src" />
  <property name="lib.dir" value="lib" />
  <property name="build.dir" value="classes" />
  <property name="jar.file" value="./${ant.project.name}.jar" />
  
  <!-- extra properties -->
  <property environment="env"/>
  <property name="hadoop.dir" value="${env.HADOOP_HOME}" />
  
  <!-- tasks -->
  <target name="clean">
    <delete failonerror="false" dir="${build.dir}"/>
    <delete failonerror="false" file="${jar.file}" />
  </target>
  
  <target name="setup">
    <mkdir dir="${build.dir}"/>
  </target>
  
  <target name="compile" depends="setup">
    <javac srcdir="${src.dir}" destdir="${build.dir}" >
      <classpath>
	<fileset dir="${hadoop.dir}">
	  <include name="hadoop-*.jar"/>
	  <include name="lib/commons-cli-1.2.jar"/>
	</fileset>
      </classpath>
    </javac>
  </target>

  <target name="package" depends="compile">
    <jar destfile="${jar.file}" basedir="${build.dir}" manifest="${src.dir}/MANIFEST.MF" />
  </target>
  
  <target name="all" depends="clean,package" />
  
  <target name="prq_integration_tests" depends="package">
    <exec executable="tests/prq_integration_tests/run.sh" />
  </target>
</project>
